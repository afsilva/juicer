#compdef juicer


_juicer_commands()
{
    local -a juicer_commands
    juicer_commands=(
	'create:Create a cart with the items specified'
	'edit:Interactively edit a release cart'
	'show:Print the contents of a cart'
	'update:Update a release crate'
	'create-like:Create a new cart like an old one'
	'push:Pushes/updates a cart on the pulp server'
	'cart-search:Search for a cart in pulp'
	'rpm-search:Search for an RPM in pulp'
	'upload:Update an item to pulp server'
	'hello:Test your connection to the pulp server'
    )

    _describe -t command 'subcommand' juicer_commands
}

_juicer_create()
{

}

_juicer_edit()
{
    _files -W ~/.juicer-carts -g "*.json(:r)"
}

_juicer_show()
{
    _files -W ~/.juicer-carts -g "*.json(:r)"
}

_juicer_update()
{

}

_juicer_create-like()
{
    _files -W ~/.juicer-carts -g "*.json(:r)"
}

_juicer_push()
{
    _files -W ~/.juicer-carts -g "*.json(:r)"
}

_juicer_cart-search()
{
    _files -W ~/.juicer-carts -g "*.json(:r)"
}

_juicer_upload()
{

}


_juicer()
{
  if (( CURRENT > 2 )) ; then
    local cmd=${words[2]}
    curcontext="${curcontext%:*:*}:juicer-$cmd"
    (( CURRENT-- ))
    shift words
    _call_function ret _juicer_$cmd
    return ret
  else
    _juicer_commands
  fi
}

# Do it?
_juicer "$@"

